# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/service_container.html
parameters:
#    parameter_name: value

services:
  app.admin_manage:
    class: AppBundle\Controller\AdminController
    arguments: ["@templating", "@sonata.seo.page", "%kernel.root_dir%", "@app.admin_manage_actions", "@plupload.handler", "@app.session_manager"]

  app.admin_manage_actions:
    class: AppBundle\Utils\AdminManageActions
    arguments: ["@doctrine.orm.entity_manager", "@validator"]
    public: false

  app.validator.sort_value:
    class: AppBundle\Validator\Constraints\ValidateSortValidator
    arguments: ["@doctrine.orm.entity_manager"]
    tags:
      - { name: validator.constraint_validator }

  app.course_manager:
    class: AppBundle\Manager\CourseManager
    arguments: ["@security.authorization_checker", "@security.token_storage", "@doctrine.orm.entity_manager"]
    public: false

  app.session_manager:
    class: AppBundle\Manager\SessionManager
    arguments: ["@doctrine.orm.entity_manager", "@app.course_manager", "@router", "@sonata.seo.page", "@session", "@templating", "@form.factory"]
    public: true

  app.session_type:
    class: AppBundle\Form\SessionType
    arguments: []
    tags:
        - { name: form.type }

  app.choice_type_extension:
    class: AppBundle\Form\Extension\ChoiceTypeExtension
    tags:
        - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\ChoiceType }

  app.text_type_extension:
    class: AppBundle\Form\Extension\TextTypeExtension
    tags:
        - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\TextType }

  app.number_type_extension:
    class: AppBundle\Form\Extension\NumberTypeExtension
    tags:
        - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\NumberType }
  
  app.submit_type_extension:
    class: AppBundle\Form\Extension\SubmitTypeExtension
    tags:
        - { name: form.type_extension, extended_type: Symfony\Component\Form\Extension\Core\Type\SubmitType }

  app.validator.course_data_var:
    class: AppBundle\Validator\Constraints\CourseDataVarValidator
    arguments: ["@app.session_manager"]
    tags:
      - { name: validator.constraint_validator }
  
  twig.extension.stringloader:
    class: Twig_Extension_StringLoader
    tags:
        - { name: twig.extension }